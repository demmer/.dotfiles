VERBOSE=no
MAILDIR=$HOME/Mail
LOGFILE=$HOME/Mail/procmaillog
LOGABSTRACT=all

#
# Anti-spam filters
#
:0
* ^Subject: WW?AA?NN?TT?EE?DD? 97 PP?ee?oo?pp?ll?ee?
/dev/null

#
# Automatic email delivery testing
#
:0
* ^To: test-delivery.*
/dev/null

#
# Add a subject line for everything.
#
:0fh
* ^Subject:[ ]*$
| formail -I "Subject: (none)"

#
# Strip out htmlification from the message body and change the
# Content-Type header
#
:0fb
* ^[Cc]ontent-[Tt]ype: text/html
| dehtml.pl

#
# Modify the subject line for other email addresses
#
:0
* ^Received:.*for <mjd@acm\.org>
{
    :0c
    * .*
    | formail -x Subject > /tmp/subject

    :0f
    * .*
    | formail -i "Subject: [acm]`(cat /tmp/subject && rm -f /tmp/subject)`"
}

#
# Save a copy of all mail into the spool mailbox, marking as already read.
#
:0c
| formail -I "Status: RO" >> $HOME/Mail/spool

#
# Get rid of duplicate messages
#
:0 Wh: msgid.lock
| formail -D 32768 msgid.cache

