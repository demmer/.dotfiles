#
# .procmailrc for pisco
#

VERBOSE=no
MAILDIR=$HOME/Mail
LOGFILE=$HOME/Mail/procmaillog
LOGABSTRACT=all

#
# Kill the really bad spam (10 pts or higher).
#
:0
* ^X-BTI-AntiSpam: sta:upper
| formail -I "Status: RO" >> $MAILDIR/spam

#
# And 5 points or more gets copied to the spam folder.
#
:0
* ^X-BTI-AntiSpam: sta:lower
| formail -I "Status: RO" >> $MAILDIR/spam-maybe

#
# Add a subject line for everything.
#
:0fh
* ^Subject:[ ]*$
| formail -I "Subject: (none)"

#
# Save a copy of html mail unmodified, just in case.
#
:0c
* ^content-type: text/html
html

#
# Strip out htmlification from the message body and change the
# Content-Type header
#
:0bhf
* ^content-type: text/html
| dehtml.pl

#
# Mailing lists I don't care to spool
#
:0
* ^List-Id:.*debian-devel.lists.debian.org
debian

:0
* ^List-Id:.*debian-security.lists.debian.org
debian

:0
* ^TO_.*soekris-tech@lists.soekris.com
soekris

:0
* ^TO_.*end2end-interest@postel.org
end2end

:0
* List-Id: .*tinyos
tinyos

:0
* List-Id: .*ip@
ip

:0
* Mailing-List: list bytesforall
bytesforall

#
# Save a copy of all mail into the spool mailbox, marking as already read.
#
:0c
| formail -I "Status: RO" >> $MAILDIR/spool

#
# Get rid of duplicate messages after saving a copy to the spool.
# I have no idea why this one needs the full path, but whatever...
#
:0 Wh: msgid.lock
| formail -D 32768 $MAILDIR/msgid.cache

#
# Split off into the mailing lists that I do want spooled.
#
:0
* List-Id: TIER 
tier

:0
* List-Id: Delay Tolerant Network
dtn

:0
* List-Id: <dtn-bugs.*>
dtn

:0
* ^From: (Ruth Gjerde|La Shana Porlaris|Kate Anderson)
cs-crap

:0
* ^TO_.*(cs|eecs)-(grads|dept)(|-food|-jobs)
cs-crap

:0
* ^TO_.*(soda|dept)-info
cs-crap

#
# C'est fini.
#
:0
inbox
